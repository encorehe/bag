options=[];var bag={_init:function(){var b=$classes;common.powerFlag(temD[1].power);var c=[{title:"\u73ed\u96c6\u4f53\u7167",name:"images",width:100,align:"center",renderer:function(a,b){return avatar=null!=a?"\x3cspan class\x3d'imgPhoto'\x3e\x3cimg src\x3d'http://image.bag61.com/"+a+"'  width\x3d'36px' height\x3d'36px' /\x3e\x3c/span\x3e":"\u672a\u4e0a\u4f20"}},{title:"\u5e74\u7ea7",name:"grade",width:120,align:"center"},{title:"\u73ed\u7ea7\u540d",name:"className",width:120,align:"center"},{title:"\u6559\u804c\u5de5\u4eba\u6570",name:"teacherCount",width:50,align:"center"},{title:"\u5b9d\u8d1d\u6570",name:"kidCount",width:50,align:"center"},{title:"\u63cf\u53d9",name:"brief",width:120,align:"center"},{title:"\u662f\u5426\u56fa\u5b9a\u540d\u79f0",name:"isFixName",width:100,align:"center",renderer:function(a){null==a&&(a=1);return state=1==a?"\u221a":"X"}},{title:"\u521b\u5efa\u65f6\u95f4",name:"insertDate",width:100,align:"center",hidden:!0},{title:"\u72b6\u6001",name:"isUse",width:30,align:"center",renderer:function(a){null==a&&(a=1);return state=1==a?"\u221a":"X"}},{title:"\u64cd\u4f5c",width:80,align:"center",renderer:function(a,b){delBtnsEnd="\x3ca class\x3d'iconfont J-tingyong' href\x3d'javascript:void(0);' title\x3d'\u505c\u7528'\x3e\x26#xe625;\x3c/a\x3e";delBtnsStart="\x3ca class\x3d'iconfont J-qiyong' data-id\x3d'1' href\x3d'javascript:void(0);' title\x3d'\u542f\u7528'\x3e\x26#xe630;\x3c/a\x3e";jsBtn="\x3ca class\x3d'iconfont J-workers' data-id\x3d'1' href\x3d'javascript:void(0);' title\x3d'\u6559\u804c\u5de5'\x3e\x26#xe615;\x3c/a\x3e";btnsHtml="\x3ca class\x3d'iconfont J-info' href\x3d'javascript:void(0);' title\x3d'\u8be6\u60c5'\x3e\x26#xe61c;\x3c/a\x3e";btnsHtml=0==b.isUse?btnsHtml+delBtnsStart:btnsHtml+delBtnsEnd;editFlagS&&(btnsHtml+="\x3ca class\x3d'iconfont J-edit' href\x3d'javascript:void(0);' title\x3d'\u7f16\u8f91'\x3e\x26#xe61a;\x3c/a\x3e");return"\x3cspan class\x3d'table-action'\x3e"+btnsHtml+jsBtn+"\x3c/span\x3e"}}],d=common.getCode();1!=d&&2!=d&&3!=d||c.splice(1,0,{title:"\u5b66\u6821",name:"schoolName",width:90,align:"center"});options.push({tpl:{edit:"editTpl",chk:"chkTpl",add:"addTpl"},url:{edit:b.edit.url,add:b.add.url,del:b.del.url,list:b.list.url},area:{edit:b.edit.area,add:b.add.area,del:b.del.area,chk:b.chk.area},title:{edit:b.edit.title,add:b.add.title,del:b.del.title,chk:b.chk.title,titleStart:b.del.titleStart,titleEnd:b.del.titleEnd},callback:{add:function(){common.codeFlag(function(){var a=$(".J-schools");common.getSchoolItem(a,{page:0,count:0},1,function(){})},function(){$(".J-schools").text($(".J-sc").text())})},edit:function(){var a=$(".J-schools");common.codeFlag(function(){common.getSchoolItem(a,{page:0,count:0},1,function(){},{schoolName:datasCur.schoolName,schoolId:datasCur.schoolId})},function(){a.text($.cookie("bag-school"))})},chk:function(){}},mmg:{indexCol:!0,checkCol:!0,root:"list"},resetFun:{add:function(){var a=$(".J-addForm").serializeArray();common.ajaxFunIframe(addUrl,a,function(){},function(){if(1==ajaxData.success){var a=ajaxData.data.id;$.ajax({url:$classImg.url,data:{fileName:"class_"+a},type:"post",cache:!1,dataType:"json",success:function(b){1==b.success&&(void 0!=$("#fileName").prop("files")[0]?(Q.AddParams("x:id",a),Q.addEvent("putFinished",function(a,b,c){common.iframeLayerMsg("\u6dfb\u52a0\u6210\u529f!",1,function(){null!=options[0].params?mmg.load(options[0].params):mmg.load()})}),Q.addEvent("putFailure",function(a){alert(a)}),Q.SetToken(b.qiniuTokenStr),Q.Upload($("#fileName").prop("files")[0],"class_"+a)):common.iframeLayerMsg("\u6dfb\u52a0\u6210\u529f!",1,function(){null!=options[0].params?mmg.load(options[0].params):mmg.load()}))}})}})},edit:function(){var a=$(".J-editForm").serializeArray();common.ajaxFunIframe(editUrl,a,function(){},function(){if(1==ajaxData.success){var a=datasCur.id;$.ajax({url:$classImg.url,data:{fileName:"class_"+a},type:"post",cache:!1,dataType:"json",success:function(b){1==b.success&&(Q.AddParams("x:id",a),Q.addEvent("putFinished",function(a,b,c){common.iframeLayerMsg("\u4fee\u6539\u6210\u529f!",1,function(){null!=options[0].params?mmg.load(options[0].params):mmg.load()})}),Q.addEvent("putFailure",function(a){alert(a)}),Q.SetToken(b.qiniuTokenStr),Q.Upload($("#fileName").prop("files")[0],"class_"+a))}})}})}}});bag._do(c,options)},mmgSelects:function(){mmg.on("cellSelected",function(b,c,d,a){datasCur=c;$(b.target).is(".J-workers")&&(b=["915px","350px"],c=c.schoolName+"-"+c.className+"-\u6559\u804c\u5de5\u4fe1\u606f",d=template("tplJzg",{}),common.layerConfirm(c,b,d,function(){bag.getJzgList(datasCur.id)}))})},creatMmg:function(b,c,d,a,e){tempMmg=$(b).mmGrid({multiSelect:!0,indexCol:c.indexCol,checkCol:c.checkCol,indexColWidth:25,cols:c.it,root:"list",width:"auto",height:"auto",fullWidthRows:!0,autoLoad:!0,noDataText:"\u5f53\u524d\u67e5\u8be2\u672a\u83b7\u53d6\u5230\u4efb\u4f55\u4fe1\u606f",url:c.url,items:c.it,cache:!1,sortStatus:"asc",nowrap:!1,method:"post",showBackboard:!1,params:c.params,plugins:[$(d).mmPaginator({style:"plain",totalCountName:"totalCount",page:1,pageParamName:"page",limitParamName:"count",limitLabel:"\u6bcf\u9875{0}\u6761",totalCountLabel:"\u5171\x3cspan\x3e{0}\x3c/span\x3e\u6761\u8bb0\u5f55",limit:c.it,limitList:[20,30,40,50]})]});tempMmg.on("cellSelected",function(b,c,d,e){a&&a(b,c,d,e)}).on("loadSuccess",function(a,b){e&&e(a,b)})},getJzgList:function(b){var c=$("#mmgJhr"),d=$("#paginatorJhr");bag.creatMmg(c,{indexCol:!0,checkCol:!1,it:[{title:"\u5934\u50cf",name:"icon",width:46,align:"center",renderer:function(a,b){var c="";return c=null==a||""==a?null==b.gender||1==b.gender?"\x3cspan class\x3d'avatarMan'\x3e\u7537\x3c/span\x3e":"\x3cspan class\x3d'avatarWomen'\x3e\u5973\x3c/span\x3e":"\x3cspan class\x3d'imgPhoto'\x3e\x3cimg src\x3d'"+a+"'  width\x3d'36px' height\x3d'36px' /\x3e\x3c/span\x3e"}},{title:"\u7528\u6237\u540d",name:"teachersName",width:120,align:"center"},{title:"\u6027\u522b",name:"gender",width:30,align:"center",renderer:function(a){null==a&&(a=1);return sex=1==a?"\u7537":"\u5973"}},{title:"\u624b\u673a",name:"telephone",width:90,align:"center"}],params:{classId:b},url:$teacherClasses.list.url},d,function(a,b,c,d){},function(a,b){})},_do:function(b,c){var d=function(){bag.searchRest();common.creatSearch();void 0==mmg||null==mmg?mainCont.getList(b,c):mmg.load(_dataParams);if(mmg)mmg.on("loadSuccess",function(){bag.mmgSelects()})};common.codeFlag(function(){var a=$(".J-school");common.getSchoolItem(a,{page:0,count:0},0,d)},function(){d()})},searchRest:function(){$("#isUse").val("");$("#keywords").val("")},loadParam:function(){var b=common.getCode();if("CG"==b||"DL"==b||"EJDL"==b){parama={isUse:$("#isUse").val(),schoolId:$(".J-school select").val(),keywords:$("#keywords").val(),page:1};var c}else parama={isUse:$("#isUse").val(),keyWords:$("#keyWords").val()};for(c in parama)""!=parama[c]&&null!=parama[c]&&void 0!=parama[c]||delete parama[c];return _dataParams=parama}};bag._init();
//@ sourceMappingURL=yey-banji.min.js.map