options=[];var bag={_init:function(){var d=$teachingPlans;common.powerFlag(temD[1].power);var g=[{title:"\u6807\u9898",name:"title",width:100,align:"center"},{title:"\u76ee\u6807",name:"semester",width:100,align:"center",hidden:!0},{title:"\u5185\u5bb9",name:"content",hidden:!0,width:100,align:"center"},{title:"\u7c7b\u578b",name:"planType",width:100,align:"center",renderer:function(b,a){var c="";switch(b){case 1:c="\u5b66\u671f\u8ba1\u5212";break;case 2:c="\u6708\u8ba1\u5212";break;case 3:c="\u5468\u8ba1\u5212"}return c}},{title:"\u73ed\u7ea7",name:"className",width:80},{title:"\u5b66\u671f",name:"semesterName",width:100,align:"center"},{title:"\u6559\u5b66\u65f6\u95f4",name:"planType",width:160,align:"center",renderer:function(b,a){var c="";switch(parseInt(b)){case 1:startTime=a.startDate;endTime=a.endDate;c=startTime+"\u81f3"+endTime;break;case 2:c=a.month+"\u6708\u4efd";break;case 3:startTime=a.weekStartDate,endTime=a.weekEndDate,c=startTime+"\u81f3"+endTime}return c}},{title:"\u72b6\u6001",name:"isUse",width:100,align:"center",renderer:function(b,a){var c="";null==b&&(b=0);switch(b){case 0:c="\u9001\u5ba1";break;case 1:c="\u9001\u5ba1\u901a\u8fc7\u53d1\u5e03";break;case 2:c="\u9a73\u56de";break;case 3:c="\u505c\u7528"}return c}},{title:"\u5236\u5b9a\u65f6\u95f4",name:"insertDate",width:130,align:"center"},{title:"\u64cd\u4f5c",width:80,align:"center",renderer:function(b,a){delBtnsEnd="\x3ca class\x3d'iconfont J-tingyong' href\x3d'javascript:void(0);' title\x3d'\u505c\u7528'\x3e\x26#xe625;\x3c/a\x3e";delBtnsStart="\x3ca class\x3d'iconfont J-qiyong' data-id\x3d'1' href\x3d'javascript:void(0);' title\x3d'\u542f\u7528'\x3e\x26#xe630;\x3c/a\x3e";btnsHtml="\x3ca class\x3d'iconfont J-info' href\x3d'javascript:void(0);' title\x3d'\u8be6\u60c5'\x3e\x26#xe61c;\x3c/a\x3e";common.getCode();btnsHtml=0==a.isUse?btnsHtml+delBtnsStart:btnsHtml+delBtnsEnd;editFlagS&&(btnsHtml+="\x3ca class\x3d'iconfont J-edit' href\x3d'javascript:void(0);' title\x3d'\u7f16\u8f91'\x3e\x26#xe61a;\x3c/a\x3e");delFlag&&(btnsHtml+="");return"\x3cspan class\x3d'table-action'\x3e"+btnsHtml+"\x3c/span\x3e"}}],e=common.getCode();1!=e&&2!=e&&3!=e||g.splice(4,0,{title:"\u5b66\u6821",name:"schoolName",width:90,align:"center"});var l=function(b){k();var a=$(".layui-layer .J-xueqi");schoolId=$(".layui-layer").find('input[name\x3d"schoolId"]').val();_pa={schoolId:schoolId};b?(common.getXueqi(a,_pa,b),$(a).find("select").on("change",function(){schoolId=$(".layui-layer").find('input[name\x3d"schoolId"]').val();common.getXueqi(a,_pa,b)})):common.getXueqi(a,_pa)},f=function(b){str=b.replace(/-/g,"/");b=new Date(str);var a=b.getMonth()+1;return{year:b.getFullYear(),month:a}},n=function(){k();if(void 0==xueqiDate||0==xuezhouData.length)return!1;l(function(){var b=$(".J-month"),a=f(xueqiDate[0].startDate).month,c=f(xueqiDate[0].startDate).year,d=f(xueqiDate[0].endDate).month;for(monthDate=[];a<=d;a++)monthDate.push({id:a,name:c+"\u5e74"+a+"\u6708\u4efd"});c=template("tplMonth",{list:monthDate});b.html(c)})},p=function(){k();l(function(){eleXuezhou=$(".J-day");datasCur&&"bianji"==zhuangtaiTag?($('select[name\x3d"semesterId"]').val(datasCur.semesterId),_pa={semesterId:datasCur.semesterId}):_pa={semesterId:xueqiDate[0].id};common.getXuezhous(eleXuezhou,_pa)})},k=function(){$(".J-xueqi").empty();$(".J-month").empty();$(".J-day").empty()},m=function(b){b=parseInt(b);switch(b){case 1:l();break;case 2:n();break;case 3:p()}},h=function(){var b=$('.layui-layer select[name\x3d"planType"]'),a=b.val();datasCur&&"bianji"==zhuangtaiTag&&(a=datasCur.planType);m(a);b.on("change",function(){a=$(this).val();m(a)})};options.push({tpl:{edit:"editTpl",chk:"chkTpl",add:"addTpl"},url:{edit:d.edit.url,add:d.add.url,del:d.del.url,list:d.list.url},area:{edit:d.edit.area,add:d.add.area,del:d.del.area,chk:d.chk.area},title:{edit:d.edit.title,add:d.add.title,del:d.del.title,chk:d.chk.title,titleStart:d.del.titleStart,titleEnd:d.del.titleEnd},callback:{add:function(){common.creaUeditor("myEditor");common.codeFlag(function(){var b=$(".layui-layer .J-school"),a=$(".layui-layer .J-class");common.getSchoolAndClassItem(b,1,a,1,h)},function(){var b=$(".layui-layer .J-school"),a=$(".layui-layer .J-class");b.text($(".J-sc").text());common.getClass(a,1,{page:0,count:0},h)})},edit:function(){common.creaUeditor("myEditor");ue.ready(function(){ue.setContent(datasCur.content)});common.codeFlag(function(){var b=$(".layui-layer .J-school"),a=$(".layui-layer .J-class");common.getSchoolAndClassItem(b,1,a,1,h,{schoolId:datasCur.schoolId,schoolName:datasCur.schoolName},{classId:datasCur.classId,className:datasCur.className})},function(){var b=$(".layui-layer .J-school"),a=$(".layui-layer .J-class");b.text($(".J-sc").text());common.getClass(a,1,{page:0,count:0},h)})},chk:function(){$(".J-content").html(datasCur.content)}},mmg:{indexCol:!0,checkCol:!0,root:"list"},resetFun:{add:function(){var b=$(".J-addForm");common.validformIn(b,function(){$("#myEditor").val();for(var a=b.serializeArray(),c=0;c<a.length;c++)"editorValue"==a[c].name&&(a[c].name="content");a=$.param(a);before=function(){};succes=function(){1==ajaxData.success&&common.iframeLayerMsg("\u6dfb\u52a0\u6210\u529f!",1,function(){sFlag=!1;mmg.load(_dataParams)})};common.ajaxFunIframe(addUrl,a,before,succes)})}}});bag._do(g,options)},_do:function(d,g){var e=function(){bag.searchRest();common.creatSearch();void 0==mmg||null==mmg?mainCont.getList(d,g):(common.creatSearch(),mmg.load(_dataParams))};common.codeFlag(function(){var d=$(".action .J-schools"),f=$(".action .J-classs");common.getSchoolAndClassItem(d,0,f,0,function(){_dataParams.page=1;e()})},function(){var d=$(".J-classs");common.getClass(d,0,{page:0,count:0},e)})},searchRest:function(){$("#isUse").val("");$("#keyWords").val("")}};bag._init();
//@ sourceMappingURL=yey-jiaoxuejihua.min.js.map