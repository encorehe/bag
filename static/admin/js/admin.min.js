/* -----------贝安港后台登录------------
 * login.js v1
 * http://www.encorehe.com/
 * Created & Modified by hejiachao
 * Date modified 2016-02.05
 *
 * Copyright 2013-2016 武汉缘诚科技 All rights reserved.
 * Licensed under MIT license.
 * http://opensource.org/licenses/MIT
 *
 */var thats,datas=[],datasMenu=[],temD=[],back=function(){location.replace("index.html")},index={init:function(){thats=index;thats.renderInfo()},renderInfo:function(){common.ajaxFun(_configbase.menu,datas,function(){},function(){0==ajaxData.success?"E000001"==ajaxData.ecode&&common.loginTimeout():(datasMenu=ajaxData.list,user=$.cookie("bag-user"),role=$.cookie("bag-role"),coder=$.cookie("bag-code"),$(".J-user").text(user),$(".J-topRole").text(role),"CG"!=coder&&"Dl"!=coder&&(schoolNames=$.cookie("bag-school"),$(".J-sc").text(schoolNames)),thats.renderMenu())},function(){thats.indexAction()},function(){common.loginTimeout()})},indexAction:function(){var a,b=$(".item");b.on("mouseover",function(c){c.preventDefault();a=$(this).parent();$(a).addClass("active")});b.parent().on("mouseleave",function(){b.parent().removeClass("active")});$(".J-loginout,.J-checkout").on("click",function(a){a.preventDefault();var b=$(this).data("title");common.ajaxFun(_configbase.loginOUt,datas,function(){},function(){1==ajaxData.success&&common.layerMsg(b,1,back)},function(){},function(){})});$(".J-renPwd").on("click",function(a){a.preventDefault();var b={id:$.cookie("bag-user-id")};a=$(this).data("title");var d=_configbase.accountsEdit,b=template("tplRenPwd",b);common.layerConfirm(a,["500px","240px"],b,function(){var a=$(".J-pwdForm");common.validformSubmit(a)},function(){var a=$(".J-pwdForm"),b=0;a.submit(function(c){c.preventDefault();common.validformSubmit(a);sFlag&&1==sFlag&&0==b?(b++,c=a.serialize(),common.ajaxFunIframe(d,c,function(){},function(){1==ajaxData.success&&common.editSuccess()})):b--});a.submit()})});$(".J-sideClose").on("click",function(a){a.preventDefault();a=$(this);var b=$(".side-left"),d=$(".side-cont");b.hasClass("active")?(b.removeClass("active"),a.html("\x26#xe60b;"),b.animate({width:"160px"}),d.animate({left:"160px"})):(b.addClass("active"),a.html("\x26#xe60c;"),b.animate({width:"60px"}),d.animate({left:"60px"}));$(".table-wrapper").empty()})},renderMenu:function(a){a=template("sideMenu",{list:datasMenu});$(".J-menu").append(a);thats.menuAction();thats.navH();$(".menu-box").mCustomScrollbar({scrollButtons:{enable:!0,scrollType:"continuous",scrollSpeed:20,scrollAmount:40},horizontalScroll:!1,theme:"minimal"})},menuReset:function(){temD=[];$(".J-menu dl").removeClass("active");$(".J-menu a").removeClass("actived")},menuAction:function(){$(".J-dt").on("click",function(){var a=$(this);if(a.hasClass("actived"))return!1;thats.menuReset();eleDl=a.parent().parent();a.addClass("actived");eleDl.addClass("active");var b=a.data("href"),c=a.data("enname");temD.push(datasMenu[eleDl.index()]);""!=b&&null!=b?thats.renderCont(c,b):$(a.parent().next()).find("a").eq(0).click()});$(".J-dd").on("click",function(a){a.preventDefault();a=$(this);if(a.hasClass("actived"))return!1;thats.menuReset();var b=a.parent().parent();b.addClass("active");a.addClass("actived");temD.push(datasMenu[b.index()]);temD.push(datasMenu[b.index()].subNav[a.index()]);b=a.data("href");a=a.data("enname");thats.renderCont(a,b)});null==$.hash("page")&&$(".J-menu dl").eq(0).find("dt a").click()},renderCont:function(a,b){$.hash("page",a);var c=template("readCrumb",{list:temD});$(".J-breadcrumb").html(c);$.ajax({url:b,dataType:"text",type:"POST",data:{},success:function(a){template.config("cache",!1);mmg=null;$("#article-main").html(a)}});thats.navH()},navClick:function(a){$(".J-menu").find('a[data-enname\x3d"'+a+'"]').click()},navH:function(){$(".menu-box").height($(".side-left").height()-$(".bar").height())},hashChange:function(){thats.renderCont()}};$(window).on("load",function(){index.init();setTimeout(function(){""==$("#article-main").html()&&(chash=$.hash("page"),$('.J-menu a[data-enname\x3d"'+chash+'"]').click())},400)});window.onresize=function(){index.navH()};$(function(){window.onhashchange=function(){chash=$.hash("page");$('.J-menu a[data-enname\x3d"'+chash+'"]').click()}});
//@ sourceMappingURL=admin.min.js.map